{
  "_from": "connect-session-sequelize",
  "_id": "connect-session-sequelize@7.1.1",
  "_inBundle": false,
  "_integrity": "sha512-sAygnRra0WrfpyHkKpw0uytuYKJO2PKHcregikkqcHaPWlaQsBB3LLBeNXdT9/BTJU20ZCPeiNschg6qW7u9Tw==",
  "_location": "/connect-session-sequelize",
  "_phantomChildren": {},
  "_requested": {
    "escapedName": "connect-session-sequelize",
    "fetchSpec": "latest",
    "name": "connect-session-sequelize",
    "raw": "connect-session-sequelize",
    "rawSpec": "",
    "registry": true,
    "saveSpec": null,
    "type": "tag"
  },
  "_requiredBy": [
    "#USER",
    "/"
  ],
  "_resolved": "https://registry.npmjs.org/connect-session-sequelize/-/connect-session-sequelize-7.1.1.tgz",
  "_shasum": "e96f33bb3f4560f286cc0e0aefec4f3d3c148fe5",
  "_shrinkwrap": null,
  "_spec": "connect-session-sequelize",
  "_where": "/home/hrvoje/Desktop/Projekti/Studenthub/server",
  "author": {
    "email": "michael.weibel@gmail.com",
    "name": "Michael Weibel",
    "url": "https://github.com/mweibel"
  },
  "bugs": {
    "url": "https://github.com/mweibel/connect-session-sequelize/issues"
  },
  "bundleDependencies": false,
  "dependencies": {
    "debug": "^4.1.1",
    "deep-equal": "^2.0.3"
  },
  "deprecated": false,
  "description": "Session store for connect-session using sequelize",
  "devDependencies": {
    "express-session": "^1.17.1",
    "mocha": "^8.0.1",
    "sequelize": ">=6.1.0",
    "sqlite3": "^4.2.0",
    "standard": "^14.3.4"
  },
  "engines": {
    "node": ">= 10"
  },
  "files": [
    "index.d.ts",
    "index.js",
    "lib"
  ],
  "homepage": "https://github.com/mweibel/connect-session-sequelize",
  "keywords": [
    "connect",
    "connect-session",
    "mysql",
    "postgres",
    "sequelize",
    "sqlite"
  ],
  "license": "MIT",
  "main": "index.js",
  "name": "connect-session-sequelize",
  "optionalDependencies": {},
  "peerDependencies": {
    "sequelize": ">= 6.1.0"
  },
  "readme": "# Connect Session Store using Sequelize\n\n[![Build Status](https://travis-ci.org/mweibel/connect-session-sequelize.png)](https://travis-ci.org/mweibel/connect-session-sequelize)\n\nconnect-session-sequelize is a SQL session store using [Sequelize.js](http://sequelizejs.com).\n\n# Installation\n\nPlease note that the most recent version requires **express 4.** If you use _express 3_ you should install version 0.0.5 and follow [the instructions in the previous README](https://github.com/mweibel/connect-session-sequelize/blob/7a446de5a7a2ebc562d288a22896d55f0fbe6e5d/README.md).\n\n```\n$ npm install connect-session-sequelize\n```\n\n# Options\n\n- `db` a successfully connected Sequelize instance\n- `table` _(optional)_ a table/model which has already been imported to your Sequelize instance, this can be used if you want to use a specific table in your db\n- `modelKey` _(optional)_ a string for the key in sequelize's models-object but it is also the name of the class to which it references (conventionally written in Camelcase) that's why it is \"Session\" by default if `table` is not defined.\n- `tableName` _(optional)_ a string for naming the generated table if `table` is not defined.\n  Default is the value of `modelKey`.\n- `extendDefaultFields` _(optional)_ a way add custom data to table columns. Useful if using a custom model definition\n- `disableTouch` _(optional)_ When true, the store will not update the db when receiving a touch() call. This can be useful in limiting db writes and introducing more manual control of session updates.\n\n# Usage\n\nWith connect\n\n```javascript\nconst connect = require(\"connect\");\n// for express, just call it with 'require('connect-session-sequelize')(session.Store)'\nconst SequelizeStore = require(\"connect-session-sequelize\")(\n  connect.session.Store\n);\n\nconnect().use(\n  connect.session({\n    store: new SequelizeStore(options),\n    secret: \"CHANGEME\",\n  })\n);\n```\n\nWith express 4:\n\n```javascript\n// load dependencies\nvar express = require(\"express\");\nvar Sequelize = require(\"sequelize\");\nvar session = require(\"express-session\");\n\n// initalize sequelize with session store\nvar SequelizeStore = require(\"connect-session-sequelize\")(session.Store);\n\n// create database, ensure 'sqlite3' in your package.json\nvar sequelize = new Sequelize(\"database\", \"username\", \"password\", {\n  dialect: \"sqlite\",\n  storage: \"./session.sqlite\",\n});\n\n// configure express\nvar app = express();\napp.use(\n  session({\n    secret: \"keyboard cat\",\n    store: new SequelizeStore({\n      db: sequelize,\n    }),\n    resave: false, // we support the touch method so per the express-session docs this should be set to false\n    proxy: true, // if you do SSL outside of node.\n  })\n);\n// continue as normal\n```\nIf you want SequelizeStore to create/sync the database table for you, you can call `sync()` against an instance of `SequelizeStore` along with [options](https://sequelize.org/master/class/lib/model.js~Model.html#static-method-sync) if needed. This will run a sequelize `sync()` operation on the model for an initialized SequelizeStore object :\n\n```javascript\nvar myStore = new SequelizeStore({\n  db: sequelize,\n});\napp.use(\n  session({\n    secret: \"keyboard cat\",\n    store: myStore,\n    resave: false,\n    proxy: true,\n  })\n);\n\nmyStore.sync();\n```\n\n# Session expiry\n\nSession records are automatically expired and removed from the database on an interval. The `cookie.expires` property is used to set session expiry time. If that property doesn't exist, a default expiry of 24 hours is used. Expired session are removed from the database every 15 minutes by default. That interval as well as the default expiry time can be set as store options:\n\n```javascript\nnew SequelizeStore({\n  ...\n  checkExpirationInterval: 15 * 60 * 1000, // The interval at which to cleanup expired sessions in milliseconds.\n  expiration: 24 * 60 * 60 * 1000  // The maximum age (in milliseconds) of a valid session.\n});\n```\n\n## Expiration interval cleanup: `stopExpiringSessions`\n\nAs expirations are checked on an interval timer, `connect-session-sequelize` can keep your process from exiting. This can be problematic e.g. in testing when it is known that the application code will no longer be used, but the test script never terminates. If you know that the process will no longer be used, you can manually clean up the interval by calling the `stopExpiringSessions` method:\n\n```js\n// assuming you have set up a typical session store, for example:\nvar myStore = new SequelizeStore({\n  db: sequelize,\n});\n\n// you can stop expiring sessions (cancel the interval). Example using Mocha:\nafter(\"clean up resources\", () => {\n  myStore.stopExpiringSessions();\n});\n```\n\n# Add custom field(s) as a column\n\nThe `extendDefaultFields` can be used to add custom fields to the session table. These fields will be read-only as they will be inserted only when the session is first created as `defaults`. Make sure to return an object which contains unmodified `data` and `expires` properties, or else the module functionality will be broken:\n\n```javascript\nsequelize.define(\"Session\", {\n  sid: {\n    type: Sequelize.STRING,\n    primaryKey: true,\n  },\n  userId: Sequelize.STRING,\n  expires: Sequelize.DATE,\n  data: Sequelize.TEXT,\n});\n\nfunction extendDefaultFields(defaults, session) {\n  return {\n    data: defaults.data,\n    expires: defaults.expires,\n    userId: session.userId,\n  };\n}\n\nvar store = new SequelizeStore({\n  db: sequelize,\n  table: \"Session\",\n  extendDefaultFields: extendDefaultFields,\n});\n```\n\n# Contributing/Reporting Bugs\n\nTry to replicate your issue using [mweibel/connect-session-sequelize-example](https://github.com/mweibel/connect-session-sequelize-example/) and add that as a link to your issue.\n\nThis way it's much simpler to reproduce and help you.\n\n# License\n\nMIT\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/mweibel/connect-session-sequelize.git"
  },
  "scripts": {
    "lint": "standard",
    "test": "mocha ./test"
  },
  "version": "7.1.1"
}
